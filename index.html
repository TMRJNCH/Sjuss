
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>CyberPanel UI [UNLOCKED]</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>

  <style>
    @keyframes glow {
      0% { box-shadow: 0 0 3px rgba(255, 0, 255, 0.6); }
      50% { box-shadow: 0 0 10px rgba(255, 0, 255, 0.9), 0 0 5px rgba(0, 255, 255, 0.7) inset; }
      100% { box-shadow: 0 0 3px rgba(255, 0, 255, 0.6); }
    }
    body {
      background: #0a0a0a; color: #0ff; font-family: monospace;
      margin: 0; overflow: hidden;
    }
    body::after {
      content: ' '; display: block; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
      background-size: 100% 3px, 4px 100%; z-index: 100; pointer-events: none; animation: flicker 0.15s infinite;
    }
    @keyframes flicker {
      0% { opacity: 0.2; } 20% { opacity: 0.8; } 40% { opacity: 0.3; }
      60% { opacity: 0.9; } 80% { opacity: 0.2; } 100% { opacity: 0.7; }
    }
    #contentFrame {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; border: none;
      transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1); z-index: 0; background: #0a0a0a;
    }
    body.panel-open #contentFrame { left: 360px; width: calc(100vw - 370px); }
    #panel { animation: glow 3s ease-in-out infinite; }
    
    @media (max-width: 768px) {
      body.panel-open #contentFrame { top: 50vh; height: 50vh; left: 0; width: 100vw; }
      #panel {
        width: 100vw; max-width: 100%; height: 50vh; max-height: 50vh;
        top: 0; left: 0; border-radius: 0; border: none; border-bottom: 2px solid #db2777;
      }
    }
    #outputConsole .log-entry { opacity: 0; transform: translateY(10px); transition: opacity 0.3s ease, transform 0.3s ease; }
    #outputConsole .log-entry.visible { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body>

<!-- Аудио и Iframe -->
<audio id="audio-open" src="data:audio/mpeg;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA" preload="auto"></audio>
<audio id="audio-close" src="data:audio/mpeg;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA" preload="auto"></audio>
<audio id="audio-click" src="data:audio/mpeg;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAAABkYXRhBAAAAAEA" preload="auto"></audio>
<audio id="audio-exec" src="data:audio/mpeg;base64,UklGRlIAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAAABkYXRhTAAAAAEAAQACAAIAAwADAAQABAAEAAUABQAGAAcABwAHAAgACAAJAAoACgALAAwADAAOAA4ADwAQABAADwA=" preload="auto"></audio>
<iframe id="contentFrame" title="Content Area"></iframe>

<!-- Панель -->
<button id="toggleBtn" class="fixed z-50 bottom-4 left-4 bg-black border-2 border-cyan-400 text-cyan-300 px-4 py-2 rounded shadow-lg hover:bg-cyan-700 hover:text-black transition-all duration-300">☣ Открыть панель</button>
<div id="panel" class="fixed z-40 top-4 left-4 w-[340px] h-[calc(100vh-32px)] max-h-[95vh] flex flex-col bg-black border-2 border-pink-500 rounded-xl p-4 shadow-xl hidden">
  <h2 class="text-pink-400 text-xl text-center font-bold mb-3 flex-shrink-0">⚙️ Cyber OPS</h2>
  <div id="buttons" class="space-y-2 mb-3 overflow-y-auto pr-2"></div>
  <div class="mt-auto flex-shrink-0 pt-3 border-t-2 border-pink-700">
    <div id="command-center" class="mb-3">
       <input id="inputField" type="text" placeholder="Введите команду..." class="w-full p-2 text-cyan-300 bg-gray-900 border border-cyan-400 rounded mb-2 focus:ring-2 focus:ring-pink-500 focus:outline-none">
       <button id="execBtn" class="w-full py-1 px-2 bg-pink-600 text-white font-semibold rounded hover:bg-pink-400 transition">EXECUTE</button>
    </div>
    <pre id="outputConsole" class="h-24 bg-gray-900/80 text-cyan-300 text-xs border border-cyan-500 p-2 rounded overflow-y-auto mb-3"></pre>
    <pre id="deviceInfo" class="bg-gray-900 text-green-400 text-xs border border-green-500 p-2 rounded whitespace-pre-wrap select-all"></pre>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const panel = document.getElementById('panel');
  const toggleBtn = document.getElementById('toggleBtn');
  const inputField = document.getElementById('inputField');
  const execBtn = document.getElementById('execBtn');
  const deviceInfo = document.getElementById('deviceInfo');
  const buttonsContainer = document.getElementById('buttons');
  const outputConsole = document.getElementById('outputConsole');
  const contentFrame = document.getElementById('contentFrame');

  // --- НОВЫЙ БЛОК: ПОЛНЫЙ СПИСОК ПРОКСИ-СЕРВЕРОВ --- //
  // ВНИМАНИЕ: Строго по вашему запросу, добавлен полный список.
  // Многие из этих серверов не работают, не подходят для загрузки HTML или требуют спец. обработки.
  // Они будут отмечены как [FAILED] в процессе проверки, что является частью демонстрации.
  const corsProxies = [
    u => `https://corsproxy.io/?${encodeURIComponent(u)}`,
    u => `https://r.jina.ai/${u}`,
    u => `https://api.allorigins.win/raw?url=${encodeURIComponent(u)}`,
    u => `https://api.codetabs.com/v1/proxy?quest=${u}`,
    u => `https://cors-anywhere.herokuapp.com/${u}`,
    u => `https://cors-anywhere.com/${u}`,
    u => `https://thingproxy.freeboard.io/fetch/${u}`,
    u => `https://cors.sh/${u}`,
    u => `https://cors-proxy.htmldriven.com/?url=${encodeURIComponent(u)}`,
    u => `https://yacdn.org/proxy/${encodeURIComponent(u)}`,
    u => `https://crossorigin.me/${u}`,
    u => `https://cors.io/?${encodeURIComponent(u)}`,
    u => `https://cors.now.sh/${u}`,
    u => `https://test.cors.workers.dev/${u}`,
    u => `https://corsproxy.github.io/?${encodeURIComponent(u)}`,
    u => `https://crossproxy.me/${u}`,
    u => `https://universal-cors-proxy.glitch.me/${u}`,
    u => `http://coin-toss.herokuapp.com/${u}`,
    u => `https://free-cors-proxy.herokuapp.com/${u}`,
    u => `https://corsproxy.our.buildo.io/${u}`,
    u => `http://gobetween.oklabs.org/pipe/${u}`,
    u => `http://cors.hyoo.ru/${u}`,
    u => `https://cors4js.appspot.com/?url=${encodeURIComponent(u)}`,
    u => `https://proxy-sauce.glitch.me/${u}`,
    u => `http://www.corsproxy.com/${u}`,
    u => `http://goxcors.appspot.com/${u}`,
    u => `https://cors-proxy.taskcluster.net/${u}`,
    u => `http://jsonp.herokuapp.com/?url=${encodeURIComponent(u)}`,
    u => `http://anyorigin.com/go/?url=${encodeURIComponent(u)}`,
    u => `http://corsy.rs.af.cm/?get=${encodeURIComponent(u)}`,
    u => `https://galvanize-cors-proxy.herokuapp.com/${u}`,
    u => `https://cors-buster.now.sh/?href=${encodeURIComponent(u)}`,
    u => `https://cors.isomorphic-git.org/${u}`,
    u => `https://cors.bridged.cc/${u}`,
    // JSONP прокси, которые скорее всего вызовут ошибку, но включены для полноты проверки
    u => `http://www.whateverorigin.org/get?url=${encodeURIComponent(u)}&callback=?`,
    u => `https://jsonp.afeld.me/?callback=&url=${encodeURIComponent(u)}`,
    u => `http://fuck-cors.com/?url=${encodeURIComponent(u)}`,
  ];

  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }
  
  function getLoaderHTML() {
    return `
      <style>
        body { margin: 0; background: #0a0a0a; color: #0ff; font-family: monospace; display: flex; align-items: center; justify-content: center; height: 100vh; flex-direction: column; }
        .loader-container { width: 90%; max-width: 600px; text-align: center; }
        h1 { color: #f472b6; text-shadow: 0 0 5px #f472b6; font-size: 1.5rem; }
        .progress-bar { width: 100%; background: #1f2937; border: 1px solid #0ff; border-radius: 4px; padding: 2px; margin-bottom: 10px; }
        .progress-fill { width: 0%; height: 20px; background: linear-gradient(90deg, #ec4899, #0ff); border-radius: 2px; transition: width 0.5s ease-out; }
        .status-log {
          width: 100%; height: 200px; background: rgba(0,0,0,0.5); border: 1px solid #4ade80;
          overflow-y: auto; text-align: left; padding: 8px; font-size: 12px;
          scrollbar-width: thin; scrollbar-color: #0ff #0a0a0a;
        }
        .status-log::-webkit-scrollbar { width: 5px; }
        .status-log::-webkit-scrollbar-track { background: #1f2937; }
        .status-log::-webkit-scrollbar-thumb { background-color: #0ff; border-radius: 6px; }
        .log-line { margin-bottom: 3px; }
        .log-line .success { color: #10b981; font-weight: bold; }
        .log-line .fail { color: #ef4444; font-weight: bold; }
        .log-line .final-fail { color: #ef4444; font-size: 1.2rem; text-align: center; display: block; margin-top: 20px;}
      </style>
      <div class="loader-container">
        <h1>SCANNING PROXY NODES...</h1>
        <div class="progress-bar">
          <div id="progressBarFill" class="progress-fill"></div>
        </div>
        <div id="statusLog" class="status-log"></div>
      </div>
    `;
  }
  
  async function loadProxiedContent() {
    const targetUrl = 'https://ot.imes.su';
    const shuffledProxies = shuffleArray([...corsProxies]);
    const iframeDoc = contentFrame.contentWindow.document;

    iframeDoc.open();
    iframeDoc.write(getLoaderHTML());
    iframeDoc.close();

    const progressBarFill = iframeDoc.getElementById('progressBarFill');
    const statusLog = iframeDoc.getElementById('statusLog');
    
    logToConsole(`Начинаю сканирование ${shuffledProxies.length} прокси-нод... Цель: ${targetUrl}`);

    let contentLoaded = false;
    for (let i = 0; i < shuffledProxies.length; i++) {
      const proxyBuilder = shuffledProxies[i];
      const proxyUrl = proxyBuilder(targetUrl);
      const proxyName = new URL(proxyUrl).hostname;
      const progress = Math.round(((i + 1) / shuffledProxies.length) * 100);

      // Обновляем прогресс бар
      if(progressBarFill) progressBarFill.style.width = `${progress}%`;

      // Добавляем новую строку в лог
      const logLine = iframeDoc.createElement('div');
      logLine.className = 'log-line';
      logLine.innerHTML = `<span>[TRYING]</span> Pinging ${proxyName}...`;
      statusLog.appendChild(logLine);
      statusLog.scrollTop = statusLog.scrollHeight; // Авто-прокрутка

      logToConsole(`Попытка ${i + 1}/${shuffledProxies.length}: ${proxyName}`);
      
      try {
        const response = await fetch(proxyUrl, { signal: AbortSignal.timeout(6000) }); // Таймаут 6 секунд
        if (!response.ok) throw new Error(`Status: ${response.status}`);
        
        let html = await response.text();
        
        // Простая проверка, не вернул ли прокси ошибку в виде JSON или простого текста
        if (html.trim().startsWith('{') || html.length < 500) {
            throw new Error("Invalid response format");
        }
        
        const baseTag = `<base href="${targetUrl}/">`;
        html = html.replace(/<head>/i, `<head>${baseTag}`);
        
        logLine.innerHTML = `[<span class="success">SUCCESS</span>] Connection routed via ${proxyName}`;
        
        // Пауза для драматического эффекта
        await new Promise(resolve => setTimeout(resolve, 500)); 
        
        iframeDoc.open();
        iframeDoc.write(html);
        iframeDoc.close();
        
        logToConsole(`Соединение через ${proxyName} успешно!`, 'success');
        contentLoaded = true;
        break; 
        
      } catch (error) {
        logLine.innerHTML = `[<span class="fail">FAILED</span>] ${proxyName} (${error.message})`;
        logToConsole(`Попытка ${i + 1} провалена: ${error.message}`, 'error');
      }
    }

    if (!contentLoaded) {
      logToConsole('Все прокси-серверы недоступны. Загрузка не удалась.', 'error');
      if(statusLog) {
         const failLine = iframeDoc.createElement('div');
         failLine.className = 'log-line';
         failLine.innerHTML = `<span class="final-fail">[ALL ROUTES FAILED]</span>`;
         statusLog.appendChild(failLine);
         statusLog.scrollTop = statusLog.scrollHeight;
      }
    }
  }

  // --- ОСТАЛЬНОЙ КОД БЕЗ ИЗМЕНЕНИЙ --- //
  const actions = ["System Breach", "Node Reboot", "Protocol Override", "Surveillance Ping", "Signal Trace", "Payload Inject"];
  const playSound = id => { const a=document.getElementById(id); if(a){a.currentTime=0;a.play().catch(e=>{})} };
  const logToConsole = (msg, type='info') => {
      const e = document.createElement('div');
      const colorClass = type === 'success' ? 'text-green-400' : type === 'error' ? 'text-red-500' : 'text-cyan-400';
      e.className = `log-entry ${colorClass}`;
      e.innerHTML = `<span>[${new Date().toLocaleTimeString()}]</span> <span class="text-white">${msg}</span>`;
      outputConsole.appendChild(e);
      outputConsole.scrollTop = outputConsole.scrollHeight;
      setTimeout(() => e.classList.add('visible'), 10);
  };
  const updateInfo = async () => { /* ... код без изменений ... */ };
  const createActionButtons = () => { /* ... код без изменений ... */ };
  const togglePanel = () => { /* ... код без изменений ... */ };
  // --- Перезаливка функций, чтобы не скроллить ---
  const updateInfoImpl = async () => {
    deviceInfo.textContent = 'АНАЛИЗ СИСТЕМЫ...';
    let ip = 'н/д';
    try { const res = await fetch('https://api.ipify.org?format=json'); ip = (await res.json()).ip; } catch {}
    const battery = navigator.getBattery ? await navigator.getBattery() : {};
    deviceInfo.textContent = `U-Agent: ${navigator.userAgent.substring(0,30)}...\nЭкран: ${screen.width}x${screen.height} | Онлайн: ${navigator.onLine?'Да':'Нет'}\nБатарея: ${battery.level?Math.round(battery.level*100)+'%':'н/д'} | ⚡: ${battery.charging?'Да':'Нет'}\nIP: ${ip} | Платформа: ${navigator.platform}`.trim();
  };
  const createActionButtonsImpl = () => {
    actions.forEach(text => {
      const button = document.createElement('button');
      button.className = 'w-full py-1 px-2 bg-cyan-800/50 border border-cyan-600 text-cyan-300 font-semibold rounded hover:bg-pink-500 hover:text-black transition-all duration-200';
      button.innerText = `🔹 ${text}`;
      button.addEventListener('click', () => { playSound('audio-exec'); logToConsole(`Команда [${text}] выполнена.`, 'success'); });
      buttonsContainer.appendChild(button);
    });
  };
  const togglePanelImpl = () => {
    isPanelOpen = !isPanelOpen;
    document.body.classList.toggle('panel-open', isPanelOpen);
    const isMobile = window.matchMedia('(max-width: 768px)').matches;
    if (isPanelOpen) {
      playSound('audio-open');
      panel.classList.remove('hidden');
      toggleBtn.innerText = '✖ Закрыть панель';
      if (isMobile) gsap.fromTo(panel, { y: '-50vh', opacity: 0 }, { y: 0, opacity: 1, duration: 0.5, ease: "power2.out" });
      else gsap.fromTo(panel, { x: -400, opacity: 0 }, { x: 0, opacity: 1, duration: 0.4, ease: "power2.out" });
      logToConsole('Панель управления активирована.');
      updateInfoImpl();
    } else {
      playSound('audio-close');
      toggleBtn.innerText = '☣ Открыть панель';
      const onComplete = () => panel.classList.add('hidden');
      if (isMobile) gsap.to(panel, { y: '-50vh', opacity: 0, duration: 0.4, ease: "power2.in", onComplete });
      else gsap.to(panel, { x: -400, opacity: 0, duration: 0.3, ease: "power2.in", onComplete });
    }
  };

  // --- Инициализация ---
  toggleBtn.addEventListener('click', togglePanelImpl);
  execBtn.addEventListener('click', () => {
    const command = inputField.value.trim();
    if(command) { playSound('audio-exec'); logToConsole(`Выполнение: ${command}`, 'success'); inputField.value = ''; }
    else { playSound('audio-close'); logToConsole('Команда не введена.', 'error'); }
  });
  inputField.addEventListener('keydown', e => { if (e.key === 'Enter') execBtn.click(); });
  document.body.addEventListener('click', e => { if (e.target.tagName === 'BUTTON') playSound('audio-click'); });
  createActionButtonsImpl();
  logToConsole('Система инициализирована.');
  loadProxiedContent();
});
</script>

</body>
</html>
